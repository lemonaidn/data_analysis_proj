<<<<<<< Updated upstream
totals_dmv_spend_purpose |>
summarise(total = sum(total_expenses))
totals_dmv_spend_purpose |>
summarise(total = sum(total_expenses))
totals_dmv_spend_purpose <- totals_dmv_spend %>%
filter(purpose != "OFFICIAL EXPENSES OF MEMBERS TOTALS:")|>
filter(purpose != "INTERN ALLOWANCES TOTALS:")|>
group_by(purpose) %>%
summarise(total_expenses = sum(amount)) %>%
arrange(desc(total_expenses))
totals_dmv_spend_purpose |>
summarise(total = sum(total_expenses))
without_official_interns <- 136865420
without_official_interns <- 136865420
remainder <- (without_official_interns - official - interns)
remainder
totals_dmv_spend_purpose |>
summarise(total = sum(total_expenses))
totals_dmv_spend_purpose |>
summarise(total = sum(total_expenses),accuracy=0.1)
totals_dmv_spend <- totals_dmv_spend %>%
filter(purpose != "OFFICIAL EXPENSES OF MEMBERS TOTALS:")|>
filter(purpose != "INTERN ALLOWANCES TOTALS:")
totals_dmv_spend %>%
summarise(purpose)
totals_dmv_spend %>%
group_by(purpose)|>
summarise()
# Read in the data for spending of DMV reps.
totals_dmv_spend <- read_csv("data/totals_dmv_spend.csv")
# glimpse of the cleaned details data set
glimpse(totals_dmv_spend)
# Records per category
totals_dmv_spend %>%
group_by(purpose) %>%
summarise(count = n()) %>%
arrange(desc(count))
# Records per category
totals_dmv_spend %>%
group_by(purpose) %>%
summarise(count = n()) %>%
arrange(desc(count))
# Let's look at the spending categories (column is called purpose) to get a general sense of where reps are using their budgets.
totals_dmv_spend_purpose <- totals_dmv_spend %>%
group_by(purpose) %>%
summarise(total_expenses = sum(amount)) %>%
arrange(desc(total_expenses))
=======
>>>>>>> Stashed changes
# OFFICIAL EXPENSES OF MEMBER TOTALS sounds really vague, and it's the top number by far with a spend of $135,333,002.69. We also notice that Official Expenses of Members is one of the two options for the program column in totals_dmv_spend. That seems like a red flag.
# The other value in the program column is INTERN ALLOWANCES. We have a column in totals_dmv_spend_purpose called INTERN ALLOWANCES TOTALS: as well, which totals 1532417.41
# Are these two values in the purpose category totally redundant? Let's save these numbers, then filter the two rows out and see if they equal the sum of all other purposes that remain.
official <- 135333002.69
interns <- 1532417.41
totals_dmv_spend_purpose <- totals_dmv_spend %>%
filter(purpose != "OFFICIAL EXPENSES OF MEMBERS TOTALS:")|>
filter(purpose != "INTERN ALLOWANCES TOTALS:")|>
group_by(purpose) %>%
summarise(total_expenses = sum(amount)) %>%
arrange(desc(total_expenses))
# What's the sum of all of the remaining 9 categories? Does it equal the sum of OFFICIAL EXPENSES OF MEMBER TOTALS and INTERN ALLOWANCES?
totals_dmv_spend_purpose |>
summarise(total = sum(total_expenses))
without_official_interns <- 136865420
remainder <- (without_official_interns - official - interns)
remainder
# I am not sure why we have $0.10 left over. Upon manually checking the math for the without_official_interns figure, it was actually #136,865,420.10. So we're good!
# Let's make this same change in the totals_dmv_spend so that we are permanently excluding these redundancies when working with that dataframe.
totals_dmv_spend <- totals_dmv_spend %>%
filter(purpose != "OFFICIAL EXPENSES OF MEMBERS TOTALS:")|>
filter(purpose != "INTERN ALLOWANCES TOTALS:")
# Just double checking that now we have only the appropriate 9 options for purpose.
totals_dmv_spend %>%
group_by(purpose)|>
summarise()
# Good to go!
<<<<<<< Updated upstream
totals_dmv_spend %>%
group_by(bioguide_id, party, last_name, first_name) %>%
summarise() %>%
filter(party == "R")
totals_dmv_spend %>%
arrange(desc(amount))
totals_dmv_spend %>%
group_by(party, last_name, first_name, purpose, amount)
arrange(desc(amount))
otals_dmv_spend %>%
group_by(amount, purpose, last_name, first_name, party)
totals_dmv_spend %>%
group_by(amount, purpose, last_name, first_name, party)
arrange(desc(amount))
totals_dmv_spend %>%
group_by(amount)
arrange(desc(amount))
totals_dmv_spend %>%
group_by(purpose, last_name, first_name, party)
arrange(desc(amount))
totals_dmv_spend %>%
group_by(party, last_name, first_name, purpose, amount)|>
arrange(desc(amount))
totals_dmv_spend |>
group_by(party, last_name, first_name, purpose, amount)|>
arrange(desc(amount))
totals_dmv_spend |>
group_by(party, last_name, first_name, purpose, amount)|>
arrange(desc(amount)|>
head(., 10)
totals_dmv_spend |>
totals_dmv_spend |>
group_by(party, last_name, first_name, purpose, amount)|>
arrange(desc(amount))
totals_dmv_spend |>
#group_by(party, last_name, first_name, purpose, amount)|>
arrange(desc(amount))
totals_dmv_spend |>
#group_by(last_name, first_name, purpose, amount)|>
arrange(desc(amount))
totals_dmv_spend |>
group_by(last_name, first_name, purpose, amount)|>
arrange(desc(amount))
totals_dmv_spend |>
group_by(last_name, first_name, purpose, amount)|>
arrange(desc(amount))
View(totals_dmv_spend_purpose)
house_majority <- read_csv("data/house_majority.csv")
View(house_majority)
totals_dmv_spend <- totals_dmv_spend |>
left_join(house_majority, join_by(year))
View(totals_dmv_spend)
totals_dmv_spend |>
group_by(party)|>
summarise(total_spend = sum(amount))
totals_dmv_spend |>
group_by(party)
totals_dmv_spend |>
group_by(party)|>
summarise(count = n())
totals_dmv_spend |>
group_by(member, party)|>
summarise(count = n())
totals_dmv_spend |>
group_by(office, party)|>
summarise(count = n())
totals_dmv_spend |>
group_by(office, party)
totals_dmv_spend |>
group_by(office, party)|>
summarise(count = n())
totals_dmv_spend |>
group_by(office, party)|>
summarise(count = n())|>
arrange(office)
house_majority <- read_csv("data/house_majority.csv")
View(house_spend_18_23)
View(house_majority)
totals_dmv_spend <- totals_dmv_spend |>
left_join(house_majority, join_by(year))
View(house_majority)
totals_dmv_spend |>
group_by(party)|>
summarise(total_spend = sum(amount))
totals_dmv_spend |>
group_by(bioguide_id, party, last_name, first_name) |>
summarise() |>
filter(party == "D")
totals_dmv_spend |>
group_by(bioguide_id, party, last_name, first_name) |>
summarise() |>
filter(party == "R")
View(house_majority)
View(general_22)
totals_dmv_spend |>
group_by(party, year)|>
summarise(total_spend = sum(amount))
totals_dmv_spend |>
group_by(party, year)|>
summarise(total_spend = sum(amount))|>
arrange(total_spend)
totals_dmv_spend |>
group_by(party, year)|>
summarise(total_spend = sum(amount))|>
arrange(desc(total_spend))
house_majority <- read_csv("data/house_majority.csv")
totals_dmv_spend <- totals_dmv_spend |>
left_join(house_majority, join_by(year))
totals_dmv_spend |>
group_by(party, year, majority_party)|>
summarise(total_spend = sum(amount))|>
arrange(desc(total_spend))
totals_dmv_spend |>
group_by(party, year, majority_party)|>
summarise(party_spend = sum(amount))|>
arrange(desc(party_spend))
partisan_spending <- totals_dmv_spend |>
group_by(party, year, majority_party)|>
summarise(party_spend = sum(amount))|>
arrange(desc(party_spend))
View(partisan_spending)
knitr::opts_chunk$set(echo = TRUE)
# Turn off scientific notation.
options(scipen=999)
# Load libraries.
library(tidyverse)
library(readr)
library(scales)
library(janitor)
setwd("~/Data Journalism/data_analysis_proj")
View(maryland_expenses)
# Read in the data for spending of DMV reps.
totals_dmv_spend <- read_csv("data/totals_dmv_spend.csv")
# glimpse of the cleaned details data set
glimpse(totals_dmv_spend)
# Records per category
totals_dmv_spend %>%
group_by(purpose) %>%
summarise(count = n()) %>%
arrange(desc(count))
# Let's look at the spending categories (column is called purpose) to get a general sense of where reps are using their budgets.
totals_dmv_spend_purpose <- totals_dmv_spend %>%
group_by(purpose) %>%
summarise(total_expenses = sum(amount)) %>%
arrange(desc(total_expenses))
# OFFICIAL EXPENSES OF MEMBER TOTALS sounds really vague, and it's the top number by far with a spend of $135,333,002.69. We also notice that Official Expenses of Members is one of the two options for the program column in totals_dmv_spend. That seems like a red flag.
# The other value in the program column is INTERN ALLOWANCES. We have a column in totals_dmv_spend_purpose called INTERN ALLOWANCES TOTALS: as well, which totals 1532417.41
# Are these two values in the purpose category totally redundant? Let's save these numbers, then filter the two rows out and see if they equal the sum of all other purposes that remain.
official <- 135333002.69
interns <- 1532417.41
totals_dmv_spend_purpose <- totals_dmv_spend %>%
filter(purpose != "OFFICIAL EXPENSES OF MEMBERS TOTALS:")|>
filter(purpose != "INTERN ALLOWANCES TOTALS:")|>
group_by(purpose) %>%
summarise(total_expenses = sum(amount)) %>%
arrange(desc(total_expenses))
# What's the sum of all of the remaining 9 categories? Does it equal the sum of OFFICIAL EXPENSES OF MEMBER TOTALS and INTERN ALLOWANCES?
totals_dmv_spend_purpose |>
summarise(total = sum(total_expenses))
without_official_interns <- 136865420
remainder <- (without_official_interns - official - interns)
remainder
# I am not sure why we have $0.10 left over. Upon manually checking the math for the without_official_interns figure, it was actually #136,865,420.10. So we're good!
# Let's make this same change in the totals_dmv_spend so that we are permanently excluding these redundancies when working with that dataframe.
totals_dmv_spend <- totals_dmv_spend %>%
filter(purpose != "OFFICIAL EXPENSES OF MEMBERS TOTALS:")|>
filter(purpose != "INTERN ALLOWANCES TOTALS:")
# Just double checking that now we have only the appropriate 9 options for purpose.
totals_dmv_spend %>%
group_by(purpose)|>
summarise()
# Good to go!
View(totals_dmv_spend_purpose)
# What are the top individual expenses in our data?
totals_dmv_spend |>
group_by(last_name, first_name, purpose, amount)|>
arrange(desc(amount))
# We already know from our category overview that personnel compensation makes up the lion's share of spending by congress. The top expense is from Elaine G. Luria, a Democrat from Virginia, in 2022. Someone in her office made $573,977.80. HOLY SMOKES. That's a pretty penny and might be a story all by itself. Donald McEachin, another dem from VA, also paid a staff member more than half a million dollars last year. Shame on them! I'd guess this would be for Chief of Staff positions, but that needs to be verified.
totals_dmv_spend |>
group_by(last_name, first_name, purpose, amount)|>
arrange(desc(amount))
totals_dmv_spend |>
#group_by(last_name, first_name, purpose, amount)|>
arrange(desc(amount))
totals_dmv_spend |>
group_by(last_name, first_name, purpose, amount)|>
arrange(desc(amount))
# First we needed to do a little research about who controlled the House from 2018-2022. It was Republicans in 2018 and Democrats every other year, so we made a simple spreadsheet to import. Let's do that now.
house_majority <- read_csv("data/house_majority.csv")
# Join with the totals_dmv_spend dataframe
totals_dmv_spend <- totals_dmv_spend |>
left_join(house_majority, join_by(year))
# Which political party in the DMV does the most spending? does that change with whether or not that party holds the majority in the House?
totals_dmv_spend |>
group_by(party, year, majority_party)|>
summarise(party_spend = sum(amount))|>
arrange(desc(party_spend))
# Aha! So it looks like Democrats are generally spending more every year, with the exception of 2020 which may be an outlier for many reasons. But Republicans spend the most in 2018, the year they were in the majority.
# But are there more Dems or Reps over the 5 years?
totals_dmv_spend |>
group_by(bioguide_id, party, last_name, first_name) |>
summarise() |>
filter(party == "D")
totals_dmv_spend |>
group_by(bioguide_id, party, last_name, first_name) |>
summarise() |>
filter(party == "R")
# There have been 17 Democrats representing the DMV over the past 5 years, in addition to 11 Republicans. Now let's look at average spend for a rep per party to compare if individual Democrats spend more than individual Republicans.
## I GOT STUCK THINKING ABOUT THIS ONE SORRY!
View(house_majority)
View(totals_dmv_spend_purpose)
View(totals_dmv_spend)
totals_dmv_spend |>
group_by(party, year, majority_party)|>
summarise(party_spend = sum(amount))|>
arrange(desc(party_spend))
totals_dmv_spend |>
group_by(bioguide_id, party, last_name, first_name) |>
summarise() |>
filter(party == "D")
totals_dmv_spend |>
group_by(bioguide_id, party, last_name, first_name) |>
summarise() |>
filter(party == "R")
totals_dmv_spend |>
group_by(bioguide_id, party, last_name, first_name, year) |>
summarise()
totals_dmv_spend |>
group_by(party, last_name, first_name, year, amount)
totals_dmv_spend |>
group_by(bioguide_id, party, last_name, first_name, year)
totals_dmv_spend |>
group_by(bioguide_id, party, last_name, first_name)
totals_dmv_spend |>
group_by(bioguide_id, year) |>
summarise(county = n())
totals_dmv_spend |>
group_by(bioguide_id, year, amount) |>
summarise(total_spend = sum(amount))
totals_dmv_spend |>
group_by(bioguide_id, year) |>
summarise(total_spend = sum(amount))
totals_dmv_spend |>
group_by(bioguide_id, last_name, first_name, party, year) |>
summarise(total_spend = sum(amount))
avg_spend_dmv <- totals_dmv_spend |>
group_by(bioguide_id, last_name, first_name, party, year) |>
mutate(total_spend = sum(amount))
View(avg_spend_dmv)
avg_spend_dmv <- totals_dmv_spend |>
group_by(bioguide_id, last_name, first_name, party, year) |>
mutate(total_spend = sum(amount))|>
mutate (years_served = count(year))
totals_dmv_spend <- totals_dmv_spend |>
left_join(house_majority, join_by(year))
View(totals_dmv_spend)
=======
# What are the top individual expenses in our data?
totals_dmv_spend |>
group_by(last_name, first_name, purpose, amount)|>
arrange(desc(amount))
## Why is group_by not working here?
# We already know from our category overview that personnel compensation makes up the lion's share of spending by congress. The top expense is from Elaine G. Luria, a Democrat from Virginia, in 2022. Someone in her office made $573,977.80. HOLY SMOKES. That's a pretty penny and might be a story all by itself. Donald McEachin, another Democrat from VA, also paid a staff member more than half a million dollars last year. Shame on them! I'd guess this would be for Chief of Staff positions, but that needs to be verified.
View(totals_dmv_spend)
category_by_year <- totals_dmv_spend |>
group_by(year, category) |>
summarize(total_spend = sum(amount))
category_by_year
barchart <- category_by_year |>
ggplot() +
geom_bar(aes(x=category, y=amount))
View(barchart)
barchart
category_by_year |>
ggplot() +
geom_bar(aes(x=category, y=total_spend))
category_by_year |>
ggplot() +
geom_bar(aes(x=category, weight=total_spend))
category_by_year |>
ggplot() +
geom_bar(aes(x=category, weight=total_spend))+
coord_flip()
category_by_year <- totals_dmv_spend |>
group_by(year, category) |>
summarize(total_spend = sum(amount)) |>
drop.na()
category_by_year <- totals_dmv_spend |>
group_by(year, category) |>
summarize(total_spend = sum(amount)) |>
drop_na()
category_by_year
category_by_year |>
ggplot() +
geom_bar(aes(x=category, weight=total_spend))+
coord_flip()
category_by_year |>
ggplot() +
geom_bar(aes(x=category, weight=total_spend))+
coord_flip()+
facet_wrap(~year)
category_by_year |>
ggplot() +
geom_bar(aes(x=year, weight=total_spend))+
coord_flip()+
facet_wrap(~category)
View(category_by_year)
category_by_year |>
ggplot() +
geom_bar(aes(x=year, weight=total_spend))+
coord_flip()+
facet_wrap(~category) +
labs(x="Amount Spent")
setwd("~/Documents/data_analysis_proj")
knitr::opts_chunk$set(echo = TRUE)
# Turn off scientific notation.
options(scipen=999)
# Load libraries.
library(tidyverse)
library(readr)
library(scales)
library(janitor)
>>>>>>> Stashed changes
# Read in the data for spending of DMV reps.
totals_dmv_spend <- read_csv("data/totals_dmv_spend.csv")
# glimpse of the cleaned details data set
glimpse(totals_dmv_spend)
# Let's look at the spending categories (column is called purpose) to get a general sense of where reps are using their budgets.
totals_dmv_spend_purpose <- totals_dmv_spend %>%
group_by(purpose) %>%
summarise(total_expenses = sum(amount)) %>%
arrange(desc(total_expenses))
# OFFICIAL EXPENSES OF MEMBER TOTALS sounds really vague, and it's the top number by far with a spend of $135,333,002.69. We also notice that Official Expenses of Members is one of the two options for the program column in totals_dmv_spend. That seems like a red flag.
# The other value in the program column is INTERN ALLOWANCES. We have a column in totals_dmv_spend_purpose called INTERN ALLOWANCES TOTALS: as well, which totals 1532417.41
# Are these two values in the purpose category totally redundant? Let's save these numbers, then filter the two rows out and see if they equal the sum of all other purposes that remain.
official <- 135333002.69
interns <- 1532417.41
totals_dmv_spend_purpose <- totals_dmv_spend %>%
filter(purpose != "OFFICIAL EXPENSES OF MEMBERS TOTALS:")|>
filter(purpose != "INTERN ALLOWANCES TOTALS:")|>
group_by(purpose) %>%
summarise(total_expenses = sum(amount)) %>%
arrange(desc(total_expenses))
# What's the sum of all of the remaining 9 categories? Does it equal the sum of OFFICIAL EXPENSES OF MEMBER TOTALS and INTERN ALLOWANCES?
totals_dmv_spend_purpose |>
summarise(total = sum(total_expenses))
without_official_interns <- 136865420
remainder <- (without_official_interns - official - interns)
remainder
# I am not sure why we have $0.10 left over. Upon manually checking the math for the without_official_interns figure, it was actually #136,865,420.10. So we're good!
# Let's make this same change in the totals_dmv_spend so that we are permanently excluding these redundancies when working with that dataframe.
totals_dmv_spend <- totals_dmv_spend %>%
filter(purpose != "OFFICIAL EXPENSES OF MEMBERS TOTALS:")|>
filter(purpose != "INTERN ALLOWANCES TOTALS:")
# Just double checking that now we have only the appropriate 9 options for purpose.
totals_dmv_spend %>%
group_by(purpose)|>
summarise()
# Good to go!
<<<<<<< Updated upstream
house_majority <- read_csv("data/house_majority.csv")
totals_dmv_spend <- totals_dmv_spend |>
left_join(house_majority, join_by(year))
totals_dmv_spend |>
group_by(bioguide_id, last_name, first_name, party, year) |>
mutate(total_spend = sum(amount))|>
mutate (years_served = count(year))
avg_spend_dmv <- totals_dmv_spend |>
group_by(bioguide_id, last_name, first_name, party, year)
avg_spend_dmv <- totals_dmv_spend |>
arrange(bioguide_id, last_name, first_name, party, year)
selected_columns <- c("bioguide_id", "last_name", "first_name", "party", "year", "majority_party", "purpose", "state", "amount")
View(selected_journalism_courses)
new_df <- totals_dmv_spend %>%
select(all_of(selected_columns))
View(new_df)
avg_spend_dmv <- totals_dmv_spend |>
select(all_of(selected_columns))
avg_spend_dmv <- avg_spend_dmv |>
mutate(total_spend = sum(amount)
avg_spend_dmv <- avg_spend_dmv |>
avg_spend_dmv <- avg_spend_dmv |>
group_by(bioguide_id) |>
mutate(total_spend = sum(amount))
selected_columns <- c("bioguide_id", "last_name", "first_name", "party", "year", "majority_party", "purpose", "state", "amount")
avg_spend_dmv <- totals_dmv_spend |>
select(all_of(selected_columns))
avg_spend_dmv <- avg_spend_dmv |>
group_by(bioguide_id) |>
mutate(total_spend = sum(amount))|>
mutate (years_served = count(year))
avg_spend_dmv <- avg_spend_dmv |>
group_by(bioguide_id) |>
mutate(total_spend = sum(amount))|>
mutate(years_in_office) = n_distinct(year))
avg_spend_dmv <- avg_spend_dmv |>
group_by(bioguide_id) |>
mutate(total_spend = sum(amount))|>
mutate(years_in_office = n_distinct(year))
avg_spend_dmv |>
group_by(bioguide_id, total_spend, years_in_office) |>
summarise(yearly_spend = (total_spend/years_in_office))
avg_spend_dmv |>
group_by(total_spend, years_in_office) |>
summarise(yearly_spend = (total_spend/years_in_office))
avg_spend_dmv |>
group_by(bioguide_id, total_spend, years_in_office) |>
summarise(yearly_spend = (total_spend/years_in_office))|>
select(bioguide_id, last_name, first_name, total_spend, years_in_office, party, majority_party)
result <- avg_spend_dmv %>%
group_by(bioguide_id, party) %>%
summarise(
total_spend = sum(amount),
years_in_office = n_distinct(year),
yearly_spend = total_spend / years_in_office
) %>%
select(bioguide_id, total_spend, years_in_office, party)
result <- avg_spend_dmv %>%
group_by(bioguide_id, party, total_spend, year, amount) %>%
summarise(
total_spend = sum(amount),
years_in_office = n_distinct(year),
yearly_spend = total_spend / years_in_office
) %>%
select(bioguide_id, last_name, first_name, yearly_spend, party, majority_party)
result <- avg_spend_dmv %>%
group_by(bioguide_id, year, amount) %>%
summarise(
total_spend = sum(amount),
years_in_office = n_distinct(year),
yearly_spend = total_spend / years_in_office
) %>%
select(bioguide_id, last_name, first_name, yearly_spend, party, majority_party)
selected_columns <- c("bioguide_id", "last_name", "first_name", "party", "year", "majority_party", "purpose", "state", "amount")
avg_spend_dmv <- totals_dmv_spend |>
select(all_of(selected_columns))
avg_spend_dmv <- avg_spend_dmv |>
group_by(bioguide_id) |>
mutate(total_spend = sum(amount))|>
mutate(years_in_office = n_distinct(year))|>
mutate(yearly_spend = (total_spend/years_in_office))
avg_spend_dmv |>
group_by(party, year, majority_party)|>
arrange(desc(yearly_spend))
avg_spend_dmv |>
group_by(bioguide_id)|>
arrange(desc(yearly_spend))
avg_spend_dmv <- avg_spend_dmv |>
select(all_of(selected_columns))
selected_columns <- c("bioguide_id", "last_name", "first_name", "party", "majority_party", "yearly_spend")
avg_spend_dmv <- avg_spend_dmv |>
select(all_of(selected_columns))
selected_columns <- c("bioguide_id", "last_name", "first_name", "party", "year", "majority_party", "purpose", "state", "amount")
avg_spend_dmv <- totals_dmv_spend |>
select(all_of(selected_columns))
avg_spend_dmv <- avg_spend_dmv |>
group_by(bioguide_id) |>
mutate(total_spend = sum(amount))|>
mutate(years_in_office = n_distinct(year))|>
mutate(yearly_spend = (total_spend/years_in_office))
selected_columns <- c("bioguide_id", "last_name", "first_name", "party", "majority_party", "yearly_spend")
avg_spend_dmv <- avg_spend_dmv |>
select(all_of(selected_columns))
avg_spend_dmv <- avg_spend_dmv |>
select(all_of(selected_columns))|>
unique()
selected_columns <- c("bioguide_id", "last_name", "first_name", "party", "yearly_spend")
avg_spend_dmv <- avg_spend_dmv |>
select(all_of(selected_columns))|>
unique()|>
selected_columns <- c("bioguide_id", "last_name", "first_name", "party", "yearly_spend")
selected_columns <- c("bioguide_id", "last_name", "first_name", "party", "yearly_spend")
avg_spend_dmv <- avg_spend_dmv |>
select(all_of(selected_columns))|>
unique()|>
View(avg_spend_dmv)
selected_columns <- c("bioguide_id", "last_name", "first_name", "party", "year", "majority_party", "purpose", "state", "amount")
avg_spend_dmv <- totals_dmv_spend |>
select(all_of(selected_columns))
avg_spend_dmv <- avg_spend_dmv |>
group_by(bioguide_id) |>
mutate(total_spend = sum(amount))|>
mutate(years_in_office = n_distinct(year))|>
mutate(yearly_spend = (total_spend/years_in_office))
selected_columns <- c("bioguide_id", "last_name", "first_name", "party", "yearly_spend")
avg_spend_dmv <- avg_spend_dmv |>
select(all_of(selected_columns))|>
unique()|>
View(avg_spend_dmv)
selected_columns <- c("bioguide_id", "last_name", "first_name", "party", "yearly_spend")
avg_spend_dmv <- avg_spend_dmv |>
select(all_of(selected_columns))|>
unique()
selected_columns <- c("bioguide_id", "last_name", "first_name", "party", "year", "majority_party", "purpose", "state", "amount")
avg_spend_dmv <- totals_dmv_spend |>
select(all_of(selected_columns))
avg_spend_dmv <- avg_spend_dmv |>
group_by(bioguide_id) |>
mutate(total_spend = sum(amount))|>
mutate(years_in_office = n_distinct(year))|>
mutate(yearly_spend = (total_spend/years_in_office))
View(avg_spend_dmv)
avg_spend_dmv <- avg_spend_dmv |>
group_by(bioguide_id) |>
mutate(total_spend = sum(amount))|>
mutate(years_in_office = n_distinct(year))|>
mutate(yearly_spend = (total_spend/years_in_office))|>
unique()
=======
# What are the top individual expenses in our data?
totals_dmv_spend |>
group_by(last_name, first_name, purpose, amount)|>
arrange(desc(amount))
## Why is group_by not working here?
# We already know from our category overview that personnel compensation makes up the lion's share of spending by congress. The top expense is from Elaine G. Luria, a Democrat from Virginia, in 2022. Someone in her office made $573,977.80. HOLY SMOKES. That's a pretty penny and might be a story all by itself. Donald McEachin, another Democrat from VA, also paid a staff member more than half a million dollars last year. Shame on them! I'd guess this would be for Chief of Staff positions, but that needs to be verified.
# Put code to here
# Since there isn't a specific date column, we need to go by year. 2020 and 2021 were the main COVID years.
# We need to look at total spending of each category by year:
category_by_year <- totals_dmv_spend |>
group_by(year, category) |>
summarize(total_spend = sum(amount)) |>
drop_na()
category_by_year
# It's really hard to compare the amounts by just looking at the table. A visualization would greatly help with comparing the different categories:
category_by_year |>
ggplot() +
geom_bar(aes(x=category, weight=total_spend))+
coord_flip()+
facet_wrap(~year) +
labs(x="Year",
y="Amount Spent")
category_by_year |>
ggplot() +
geom_bar(aes(x=year, weight=total_spend))+
coord_flip()+
facet_wrap(~category) +
labs(x="Year",
y="Amount Spent")
# Display results of code below this codeblock
category_by_year |>
ggplot() +
geom_line(aes(x=year, y=total_spend))+
coord_flip()+
facet_wrap(~category) +
labs(x="Year",
y="Amount Spent")
category_by_year |>
ggplot() +
geom_line(aes(x=year, y=total_spend))+
facet_wrap(~category) +
labs(x="Year",
y="Amount Spent")
category_by_year |>
ggplot() +
geom_line(aes(x=category, y=total_spend))+
facet_wrap(~year) +
labs(x="Year",
y="Amount Spent")
category_by_year |>
ggplot() +
geom_line(aes(x=year, y=total_spend))+
facet_wrap(~category) +
labs(x="Year",
y="Amount Spent")
View(totals_dmv_spend)
category_by_year |>
filter(category != "PERSONNEL COMPENSATION")
category_by_year |>
filter(category != "PERSONNEL COMPENSATION") |>
ggplot() +
geom_line(aes(x=year, y=total_spend))+
facet_wrap(~category) +
labs(x="Year",
y="Amount Spent")
category_by_year <- totals_dmv_spend |>
group_by(year, category) |>
summarize(total_spend = sum(amount)) |>
drop_na()
category_by_year
category_by_year |>
filter(category == "TRAVEL") |>
ggplot() +
geom_line(aes(x=year, y=total_spend))+
facet_wrap(~category) +
labs(x="Year",
y="Amount Spent",
title="TRAVEL",
caption="source: ProPublica")
category_by_year |>
filter(category == "PERSONNEL COMPENSATION") |>
ggplot() +
geom_line(aes(x=year, y=total_spend))+
facet_wrap(~category) +
labs(x="Year",
y="Amount Spent",
title="PERSONNEL COMPENSATION",
caption="source: ProPublica")
category_by_year |>
filter(category == "EQUIPMENT") |>
ggplot() +
geom_line(aes(x=year, y=total_spend))+
facet_wrap(~category) +
labs(x="Year",
y="Amount Spent",
title="EQUIPMENT",
caption="source: ProPublica")
category_by_year |>
filter(category == "FRANKED MAIL") |>
ggplot() +
geom_line(aes(x=year, y=total_spend))+
facet_wrap(~category) +
labs(x="Year",
y="Amount Spent",
title="FRANKED MAIL",
caption="source: ProPublica")
category_by_year |>
filter(category == "OTHER SERVICES") |>
ggplot() +
geom_line(aes(x=year, y=total_spend))+
facet_wrap(~category) +
labs(x="Year",
y="Amount Spent",
title="OTHER SERVICES",
caption="source: ProPublica")
category_by_year |>
filter(category == "PRINTING AND REPRODUCTION") |>
ggplot() +
geom_line(aes(x=year, y=total_spend))+
facet_wrap(~category) +
labs(x="Year",
y="Amount Spent",
title="PRINTING AND REPRODUCTION",
caption="source: ProPublica")
category_by_year |>
filter(category == "RENT COMMUNICATION UTILITIES") |>
ggplot() +
geom_line(aes(x=year, y=total_spend))+
facet_wrap(~category) +
labs(x="Year",
y="Amount Spent",
title="RENT COMMUNICATION UTILITIES",
caption="source: ProPublica")
category_by_year |>
filter(category == "RENT COMMUNICATION UTILITIES") |>
ggplot() +
geom_line(aes(x=year, y=total_spend))+
facet_wrap(~category) +
labs(x="Year",
y="Amount Spent",
title="RENT COMMUNICATION UTILITIES",
caption="source: ProPublica")
category_by_year |>
filter(category == "PERSONNEL COMPENSATION")
category_by_year |>
filter(category == "EQUIPMENT")
category_by_year |>
filter(category == "FRANKED MAIL")
category_by_year |>
filter(category == "OTHER SERVICES")
category_by_year |>
filter(category == "PRINTING AND REPRODUCTION")
category_by_year |>
filter(category == "RENT COMMUNICATION UTILITIES")
category_by_year |>
filter(category == "SUPPLIES AND MATERIALS")
category_by_year |>
filter(category == "TRAVEL")
category_by_year |>
filter(category == "RENT COMMUNICATION UTILITIES")
category_by_year <- totals_dmv_spend |>
group_by(year, category) |>
summarize(total_spend = sum(amount)) |>
drop_na()
category_by_year
View(category_by_year)
category_by_year |>
filter(category == "PERSONNEL COMPENSATION")
category_by_year |>
filter(category == "EQUIPMENT")
category_by_year |>
filter(category == "FRANKED MAIL")
category_by_year |>
filter(category == "OTHER SERVICES")
category_by_year |>
filter(category == "PRINTING AND REPRODUCTION")
category_by_year |>
filter(category == "RENT  COMMUNICATION  UTILITIES")
category_by_year |>
filter(category == "SUPPLIES AND MATERIALS")
category_by_year |>
filter(category == "TRAVEL")
category_by_year |>
filter(category == "PERSONNEL COMPENSATION")
category_by_year <- totals_dmv_spend |>
group_by(year, category) |>
summarize(total_spend = sum(amount)) |>
drop_na() |>
str_trim(category, " ")
?str_trim
category_by_year <- totals_dmv_spend |>
group_by(year, category) |>
summarize(total_spend = sum(amount)) |>
drop_na() |>
str_trim(category)
category_by_year |>
filter(category == "EQUIPMENT")
View(category_by_year)
category_by_year |>
filter(category == "PERSONNEL COMPENSATION") |>
ggplot() +
geom_line(aes(x=year, y=total_spend))+
facet_wrap(~category) +
labs(x="Year",
y="Amount Spent",
title="PERSONNEL COMPENSATION",
caption="source: ProPublica")
category_by_year |>
filter(category == "EQUIPMENT") |>
ggplot() +
geom_line(aes(x=year, y=total_spend))+
facet_wrap(~category) +
labs(x="Year",
y="Amount Spent",
title="EQUIPMENT",
caption="source: ProPublica")
category_by_year |>
filter(category == "FRANKED MAIL") |>
ggplot() +
geom_line(aes(x=year, y=total_spend))+
facet_wrap(~category) +
labs(x="Year",
y="Amount Spent",
title="FRANKED MAIL",
caption="source: ProPublica")
category_by_year |>
filter(category == "OTHER SERVICES") |>
ggplot() +
geom_line(aes(x=year, y=total_spend))+
facet_wrap(~category) +
labs(x="Year",
y="Amount Spent",
title="OTHER SERVICES",
caption="source: ProPublica")
category_by_year |>
filter(category == "PRINTING AND REPRODUCTION") |>
ggplot() +
geom_line(aes(x=year, y=total_spend))+
facet_wrap(~category) +
labs(x="Year",
y="Amount Spent",
title="PRINTING AND REPRODUCTION",
caption="source: ProPublica")
category_by_year |>
filter(category == "RENT  COMMUNICATION  UTILITIES") |>
ggplot() +
geom_line(aes(x=year, y=total_spend))+
facet_wrap(~category) +
labs(x="Year",
y="Amount Spent",
title="RENT COMMUNICATION UTILITIES",
caption="source: ProPublica")
category_by_year |>
filter(category == "SUPPLIES AND MATERIALS") |>
ggplot() +
geom_line(aes(x=year, y=total_spend))+
facet_wrap(~category) +
labs(x="Year",
y="Amount Spent",
title="SUPPLIES AND MATERIALS",
caption="source: ProPublica")
category_by_year |>
filter(category == "TRAVEL") |>
ggplot() +
geom_line(aes(x=year, y=total_spend))+
facet_wrap(~category) +
labs(x="Year",
y="Amount Spent",
title="TRAVEL",
caption="source: ProPublica")
category_by_year |>
filter(category == "PERSONNEL COMPENSATION") |>
ggplot() +
geom_line(aes(x=year, y=total_spend))+
labs(x="Year",
y="Amount Spent",
title="PERSONNEL COMPENSATION",
caption="source: ProPublica")
category_by_year |>
filter(category == "EQUIPMENT") |>
ggplot() +
geom_line(aes(x=year, y=total_spend))+
labs(x="Year",
y="Amount Spent",
title="EQUIPMENT",
caption="source: ProPublica")
category_by_year |>
filter(category == "FRANKED MAIL") |>
ggplot() +
geom_line(aes(x=year, y=total_spend))+
labs(x="Year",
y="Amount Spent",
title="FRANKED MAIL",
caption="source: ProPublica")
category_by_year |>
filter(category == "OTHER SERVICES") |>
ggplot() +
geom_line(aes(x=year, y=total_spend))+
labs(x="Year",
y="Amount Spent",
title="OTHER SERVICES",
caption="source: ProPublica")
category_by_year |>
filter(category == "PRINTING AND REPRODUCTION") |>
ggplot() +
geom_line(aes(x=year, y=total_spend))+
labs(x="Year",
y="Amount Spent",
title="PRINTING AND REPRODUCTION",
caption="source: ProPublica")
category_by_year |>
filter(category == "RENT  COMMUNICATION  UTILITIES") |>
ggplot() +
geom_line(aes(x=year, y=total_spend))+
labs(x="Year",
y="Amount Spent",
title="RENT COMMUNICATION UTILITIES",
caption="source: ProPublica")
category_by_year |>
filter(category == "SUPPLIES AND MATERIALS") |>
ggplot() +
geom_line(aes(x=year, y=total_spend))+
labs(x="Year",
y="Amount Spent",
title="SUPPLIES AND MATERIALS",
caption="source: ProPublica")
category_by_year |>
filter(category == "TRAVEL") |>
ggplot() +
geom_line(aes(x=year, y=total_spend))+
labs(x="Year",
y="Amount Spent",
title="TRAVEL",
caption="source: ProPublica")
totals_dmv_spend_offt <- totals_dmv_spend |>
group_by(office, year)|>
mutate(office_total = sum(amount))
View(totals_dmv_spend_offt)
totals_dmv_spend_offt <- totals_dmv_spend |>
group_by(office, year)|>
summarise(office_total = sum(amount))
View(totals_dmv_spend_offt)
totals_dmv_spend_offt <- totals_dmv_spend |>
group_by(last_name, first_name, year)|>
summarise(office_total = sum(amount))
View(totals_dmv_spend_offt)
totals_dmv_spend_offt <- totals_dmv_spend |>
group_by(last_name, first_name, year)|>
summarise(office_total = sum(amount)) |>
arrange(desc(office_total))
totals_dmv_spend_offt
totals_dmv_spend |>
filter(last_name == "CUMMINGS" & first_name == "ELIJAH") |>
group_by(year) |>
summarise(office_total = summ (amount))
totals_dmv_spend |>
filter(last_name == "CUMMINGS" & first_name == "ELIJAH") |>
group_by(year) |>
summarise(office_total = sum (amount))
totals_dmv_spend_offt |>
group_by(office, year, office_total)|>
arrange(office_total)
totals_dmv_spend |>
group_by(office, year)|>
arrange(office_total)
totals_dmv_spend |>
filter(last_name == "CUMMINGS" & first_name == "ELIJAH") |>
group_by(year) |>
summarise(office_total = sum (amount))
totals_dmv_spend |>
filter(last_name == "CUMMINGS" & first_name == "ELIJAH" & year == "2020")
View(totals_dmv_spend)
totals_dmv_spend <- read_csv("data/totals_dmv_spend.csv") |>
select(-organization_code, -program_code, -budget_object_class, -data_source, -document)
View(totals_dmv_spend)
View(totals_dmv_spend)
totals_dmv_spend <- read_csv("data/totals_dmv_spend.csv") |>
select(-organization_code, -program_code, -budget_object_class, -data_source, -document, -vendor_id, -payee, -start_date, -end_date, -budget_object_code, -transcode, -recordid, -id, -sort_subtotal_description, -transaction_date)
View(totals_dmv_spend)
totals_dmv_spend <- read_csv("data/totals_dmv_spend.csv") |>
select(-organization_code, -program_code, -budget_object_class, -data_source, -document, -vendor_id, -payee, -start_date, -end_date, -budget_object_code, -transcode, -recordid, -id, -sort_subtotal_description, -transaction_date, -date)
totals_dmv_spend <- read_csv("data/totals_dmv_spend.csv") |>
select(-organization_code, -program_code, -budget_object_class, -data_source, -document, -vendor_id, -payee, -start_date, -end_date, -budget_object_code, -transcode, -recordid, -id, -sort_subtotal_description, -transaction_date, -date)
View(totals_dmv_spend)
>>>>>>> Stashed changes
